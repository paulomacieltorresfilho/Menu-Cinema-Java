package View;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;


import Controller.MovieController;
import Model.Movie;

public class MovieScreenDetails 
extends ScreenDetailsBase
implements ActionListener{

	private MovieController filmsDate;
	private ArrayList<Movie> films;
	private int pos;
	
	public MovieScreenDetails(MovieController filmsDate, int pos, MovieScreen ms) {
		super();
		this.pos = pos;
		this.filmsDate = filmsDate;
		films = filmsDate.getFilms();
		Movie film = films.get(pos);
			
		id.setText(String.valueOf(film.getId()));
		name.setText(film.getName());
		synopsis.setText(film.getSynopsis());
		genre.setText(film.getGenre());
		duration.setText(String.valueOf(film.getDuration()));
		
		menu.setTitle("Detalhes do filme");
		lId.setText("Id: ");
		lName.setText("Nome: ");
		lSynopsis.setText("Sinopse: ");
		lGenre.setText("Gênero: ");
		lDuration.setText("Duração: ");
		
		save.addActionListener(this);
		remove.addActionListener(this);
	}

	@Override
	public void actionPerformed(ActionEvent e) {
		Object src = e.getSource();
		
		if(src == save) {
			try {
				Movie m = new Movie(
						Integer.valueOf(id.getText()),
						name.getText(),
						synopsis.getText(),
						genre.getText(),
						Integer.valueOf(duration.getText())
						);
				this.filmsDate.delete(pos);
				this.filmsDate.register(pos, m);
				messageSave();	
				
			} catch (Exception e1) {
				massageErroRegister();
			}
		}
		if(src == remove) {
			this.filmsDate.delete(pos);
			messageRemove();
		}
	}

}
