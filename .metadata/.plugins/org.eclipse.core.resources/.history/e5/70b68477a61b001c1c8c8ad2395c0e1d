package View;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.GregorianCalendar;

import Controller.SessionController;
import Model.Movie;
import Model.Session;

public class SessionScreenDetails 
extends ScreenDetailsBase
implements ActionListener{
	private SessionController sessionData;
	private ArrayList<Session> sessions;
	private int pos;
	
	public SessionScreenDetails(SessionController sessionData, int pos) {
		super();
		this.pos = pos;
		this.sessionData = sessionData;
		sessions = sessionData.getSession();
		Session session = sessions.get(pos);
			
		l1.setText(session.getMovie().getName());
		l2.setText(Character.toString(session.getRoom()));
		
		l3.setText(String.valueOf(session.getDate().Calendar.DATE));
		l4.setText("ads");
		l5.setText("das");
		
		menu.setTitle("Detalhes da sessão");
		lL1.setText("Filme: ");
		lL2.setText("Sala: ");
		lL3.setText("Dia: ");
		lL4.setText("Horário: ");
		lL5.setText(": ");
		
		save.addActionListener(this);
		remove.addActionListener(this);
	}
	
	
	@Override
	public void actionPerformed(ActionEvent e) {
		Object src = e.getSource();
		
		if(src == save) {
			try {
				Movie m = new Movie(0, "nome", "sinopse", "genero", 0);
				GregorianCalendar d = new GregorianCalendar(2021,1,1,0,0);
				Session s = new Session(m,d,'a');
				this.sessionData.update(pos, s);
				messageSave();	
				
			} catch (Exception e1) {
				massageErroRegister();
			}
		}
		if(src == remove) {
			this.sessionData.delete(pos);
			messageRemove();
		}
	}

}
